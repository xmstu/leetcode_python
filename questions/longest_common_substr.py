

class Solution:

    @staticmethod
    def longest_common_substring(str1, str2):
        m = len(str1)
        n = len(str2)
        # 创建一个二维数组来存储子问题的解
        dp = [[0] * (n+1) for _ in range(m+1)]
        # 用于跟踪最长公共子串的长度和结束位置
        max_length = 0
        end = 0

        # 填充二维数组
        for i in range(1, m+1):
            for j in range(1, n+1):
                if str1[i-1] == str2[j-1]:
                    dp[i][j] = dp[i-1][j-1] + 1
                    if dp[i][j] > max_length:
                        max_length = dp[i][j]
                        end = i
                else:
                    dp[i][j] = 0

        # 提取最长公共子串
        return str1[end - max_length: end]

class TestLCS:

    """
    pytest -s longest_common_substr.py::TestLCS
    """

    def test(self):
        solution = Solution()

        # 定义两个字符串
        str1 = "知识类别: 知识问答; 所属港口: 湛江港; 知识分类: 维保操作手册,行业术语; 所属文件名: 操作手册/抓斗式卸船机/卷筒换绳操作手册.docx/操作手册-抓斗式卸船机-卷筒换绳操作手册.docx; 生成的问题: 抓斗式卸船机更换起升钢丝绳的操作步骤是什么？, 生成的答案: 抓斗式卸船机更换起升钢丝绳的操作步骤如下： 1. 主小车停在后伸距28米处，抓斗打开放置在地面，放松起升、开闭绳，卸下起升绳端的楔套。 2. 将起升卷筒上的绳端与引绳（自备）连接好，引绳固定于卷筒上。 3. 将小车牵引机构的浮动联轴器脱开，使两差动减速箱的动作完全独立。 4. 解除起升钢丝绳在卷筒上的压板，打开起升电机的高速制动器，以额定速度的10%驱动起升电机，将旧钢丝绳放至码头面上，直至卷筒上引绳接触码头面。 5. 旧钢丝绳与引绳脱开后，新钢丝绳与引导绳端接牢。（新钢丝绳用滚筒支承在码头上）。 6. 以额定速度的10%驱动起升电机，引绳带动新钢丝绳经滑轮组进入卷筒。固定好新钢丝绳和引绳。 7. 将新钢丝绳与抓斗链环用楔套连接。, 知识内容: 钢丝绳换绳的方法较多，通常利用原有驱动卷筒进行钢丝绳换绳，是最方便的，也是用得较多的一种。用户也可根据自己的使用经验，采用其它换绳方法。\n下面介绍利用驱动卷筒更换钢丝绳的方法：\n1) 起升钢丝绳、开闭钢丝绳\n以更换起升钢丝绳为例。\n(1) 主小车停在后伸距28米处，抓斗打开放置在地面，放松起升、开闭绳，卸下起升绳端的楔套。\n(2) 将起升卷筒上的绳端与引绳（自备）连接好，引绳固定于卷筒上；\n(3) 将小车牵引机构的浮动联轴器脱开，使两差动减速箱的动作完全独立；\n(4) 解除起升钢丝绳在卷筒上的压板，打开起升电机的高速制动器，以额定速度的10%驱动起升电机，将旧钢丝绳放至码头面上，直至卷筒上引绳接触码头面。\n(5) 旧钢丝绳与引绳脱开后，新钢丝绳与引导绳端接牢。(新钢丝绳用滚筒支承在码头上)。\n(6) 以额定速度的10%驱动起升电机，引绳带动新钢丝绳经滑轮组进入卷筒。固定好新钢丝绳和引绳。\n(7) 将新钢丝绳与抓斗链环用楔套连接。\n用类似的办法更换其它三根起升开闭绳。\n利用单个卷筒的驱动调整四根起升开闭绳的平衡。\n2) 臂架俯仰钢丝绳\n(1) 臂架水平位置。\n(2) 将安全与平衡装置拆下。\n(3) 引绳的一端与旧钢丝绳的一端连接，引绳的另一端固定于卷筒上。\n(4) 卸下卷筒上钢丝绳另一端压板，松开几圈后，将绳端引入机房地面检修孔。\n(5) 卸下钢丝绳与引绳连接处的钢丝绳压板。\n(6) 驱动应急机构，将旧钢丝绳放至码头面上，直至卷筒上引绳接触码头面。\n(7) 将引导绳与旧钢丝绳分离，并与新钢绳的一端接牢。\n(8) 驱动应急机构，引绳带动新钢丝绳经滑轮组进入卷筒。固定好新钢丝绳和引绳。\n(9) 安装安全与平衡装置。\n3) 注意事项\n(1) 换绳的方法，以旧换新。\n(2) 换绳时机构的位置：液压张紧在松绳状态，俯仰绳的断绳保护一定要先卸下。\n(3) 卸下压板后，钢丝绳由于重力作用，下垂较大，作好预防工作。\n(4) 注意钢丝绳的保护，不可与火相碰，不可在尖锐面上磨。\n(5) 用驱动卷筒换绳，应小心谨慎，卷筒转2圈后，检查无误方可继续进行。再检查，再转2圈，再检查，尤其到终点时更要加倍注意。\n(6) 钢丝绳全部到位后，应进行长度调整。\n(7) 起升、开闭、牵引小车和臂架俯仰等主令限位开关的试验。\n(8) 全部达到要求，方可负载运行。\n参阅图纸及资料：\nUL411300  托绳小车运行缠绕系统\nUL410800  臂架俯仰机构\nUL410900  起升、开闭、小车牵引机构"
        str2 = "卸船机更换起升钢丝绳、开闭钢丝绳的具体流程工艺如下：\n\n1. 检查贮绳圈内的细钢索的压绳板是否固定牢固。\n2. 将小车浮动联轴器断开，手动打开起升、开闭、小车运行的高速制动器，通过液压锁，释放需要更换钢丝绳的卷筒的低速制动器。注意，不更换钢丝绳的卷筒上的低速制动器不要打开。\n3. 将主小车停在后大梁上的停机位置，并将小车固定，防止随意移动。\n4. 打开抓斗，将其放置在码头上，松开起升绳，卸下固定在抓斗上的钢丝绳。\n5. 开动机构，将旧钢丝绳全部放到码头上，直至出现细钢丝绳。\n6. 去掉旧钢丝绳，将新绳的一端与细钢丝绳的一端连接，确保接头牢固。\n7. 检查一切正常后，开动起升机构，用细钢丝绳带动新钢丝绳进入卷筒。同时，压好引导线和起升绳。\n8. 根据设备情况，可以选择同时更换两根钢丝绳（必须是同一个减速器上的卷筒），也可以单根更换。\n9. 在整个换绳过程中，卷筒的速度必须保持慢速，并且在钢丝绳经过的地方，需要有专人巡检。\n10. 钢丝绳更换完成后，应进行长度调整，并确保起升、开闭、牵引小车和臂架俯仰等主令限位开关的试验。\n11. 全部达到要求后，方可进行负载运行。\n\n请注意，以上流程可能需要根据具体设备型号和操作手册进行调整"

        # 找到最长公共子串
        similar_substring = solution.longest_common_substring(str1, str2)
        print(f"similar_substring: {similar_substring}")





